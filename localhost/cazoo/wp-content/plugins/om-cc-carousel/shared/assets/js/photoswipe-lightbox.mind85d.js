!function(t,a){"use strict";function o(){var a,o,e="<div>",s=[{type:"close",title:"Close (Esc)",icon:"ios-close"},{type:"share",title:"Share",icon:"android-share-alt"},{type:"fs",title:"Toggle fullscreen",icon:"ios-photos-outline"},{type:"zoom",title:"Zoom in/out",icon:"ios-plus-empty"}],p=t(e,{id:"om-cc-photoswipe",class:"pswp",tabindex:"-1",role:"dialog","aria-hidden":"true"}),r=t(e,{class:"pswp__scroll-wrap"}).appendTo(p),i=t(e,{class:"pswp__container"}).appendTo(r),l=t(e,{class:"pswp__ui pswp__ui--hidden"}).appendTo(r),n=t(e,{class:"pswp__top-bar"}).appendTo(l),c=t(e,{class:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"}).appendTo(l),d=t(e,{class:"pswp__caption"});for(h&&p.addClass("pswp-touch"),t(e,{class:"pswp__bg"}).prependTo(p),a=0;a<3;a++)t('<div class="pswp__item">').appendTo(i);for(t(e,{class:"pswp__counter"}).prependTo(n),a=0;a<s.length;a++)o=s[a],t('<button class="pswp__button">').addClass("pswp__button--"+o.type+" ion-"+o.icon).attr("title",o.title).appendTo(n);return t('<div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div>').appendTo(n),t(e,{class:"pswp__share-tooltip"}).prependTo(c),t('<button class="pswp__button">').addClass("pswp__button--arrow--left").attr("title","Previous").append(u).appendTo(l),t('<button class="pswp__button">').addClass("pswp__button--arrow--right").attr("title","Next").append(w).appendTo(l),d.appendTo(l),t(e,{class:"pswp__caption"}).appendTo(d),p.appendTo("body"),p}function e(){if(!l){var a,e,s,p=t('meta[name="photoswipe"]'),r=[{id:"facebook",label:'<span class="ion-social-facebook"></span>',url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:'<span class="ion-social-twitter"></span>',url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:'<span class="ion-social-pinterest"></span>',url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"tumblr",label:'<span class="ion-social-tumblr"></span>',url:"http://tumblr.com/widgets/share/tool?canonicalUrl={{url}}"},{id:"google-plus",label:'<span class="ion-social-googleplus"></span>',url:"https://plus.google.com/share?url={{url}}"},{id:"vk",label:'<span class="ion-speakerphone"></span>',url:"http://vk.com/share.php?url={{url}}&image={{image_url}}"},{id:"reddit",label:'<span class="ion-social-reddit"></span>',url:"https://www.reddit.com/submit?url={{url}}"},{id:"download",label:'<span class="ion-arrow-down-c"></span>',url:"{{raw_image_url}}",download:!0}];if(p.length&&(e=p.prop("content"))&&(e=t.parseJSON(e),d.fullscreenEl=!!e.fullscreen&&!!e.fullscreen,d.zoomEl=!!e.zoom&&!!e.zoom,t.isPlainObject(e.share)))for(d.shareEl=!0,d.shareButtons=[],s=0;s<r.length;s++)a=r[s],a.id in e.share&&(a.label+=e.share[a.id],d.shareButtons.push(a));n=o(),l=n.get(0)}}function s(t){var a=t.data("selector"),o=t;return a&&(a=a.split("|"),o=t[a[0]].apply(t,Array.prototype.slice.call(a,1))),o}function p(a,o){var e=t(o),s=e.data("size").split("x"),p=parseInt(s[0]),r=parseInt(s[1]);return e.data("number",a),e.data("ratio",p/r),{src:e.data("item"),w:p,h:r,title:e.data("title")}}function r(a,o,e){var r=o.map(p).get(),u=e.data("number"),w=s(e),h=w.offset(),_=w.width(),g=w.height(),m=t.extend({galleryUID:a,index:u,getThumbBoundsFn:function(){return{x:h.left,y:h.top,w:_}},showHideOpacity:Math.abs(_/g-e.data("ratio"))>.03},d);i=new PhotoSwipe(l,PhotoSwipeUI_Default,r,m),i.init(),i.listen("preventDragEvent",function(t,a,o){clearTimeout(c),a?n.addClass("pswp-dragging"):c=setTimeout(function(){n.removeClass("pswp-dragging")},350)}),i.listen("beforeChange",function(t){n.removeClass("pswp-dragging")})}var i,l,n,c,d={captionEl:!0,shareEl:!1,fullscreenEl:!1,zoomEl:!1},u='<span class="om-cc-arrow-left"></span>',w='<span class="om-cc-arrow-right"></span>',h="ontouchstart"in window;a.omCcLightbox&&a.omCcLightbox.leftArrow&&a.omCcLightbox.rightArrow&&(u=a.omCcLightbox.leftArrow,w=a.omCcLightbox.rightArrow),t(function(){t("[data-om-cc-photoswipe]").each(function(a){var o=t(this);e(),o.on("click","[data-item]",function(e){e.preventDefault(),r(a+1,o.find("[data-item]"),t(this))})}),t(document).on("click","[data-om-cc-photoswipe-group]",function(a){a.preventDefault(),e();var o=t(this),s=o.data("om-cc-photoswipe-group");r("group-"+s,t('[data-om-cc-photoswipe-group="'+s+'"]'),o)}).on("click",".pswp__button--arrow--left,.pswp__button--arrow--right",function(a){var o=t(a.target);o.hasClass(".pswp__button")||o.parent(".pswp__button").trigger("click")});var a,o,s,p,i,l=t(window),n=location.hash;n&&(a=n.replace("#","").match(/&gid=([^&]+)&pid=([^&]+)/),t.isArray(a)&&3===a.length&&(o=a[1],s=a[2],/^group-/.test(o)?p=t('[data-om-cc-photoswipe-group="'+o.replace("group-","")+'"]'):t.isNumeric(o)&&o>=1&&(o=parseInt(o),p=t("[data-om-cc-photoswipe]:eq("+(o-1)+") [data-item]")),p&&p.length>=s&&(e(),i=p.eq(s-1),l.scrollTop(i.offset().top-l.height()/3),r(o,p,i))))})}(jQuery,window);